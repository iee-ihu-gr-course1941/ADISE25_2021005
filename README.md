Table of Contents
=================
   * [Εγκατάσταση](#εγκατάσταση)
      * [Απαιτήσεις](#απαιτήσεις)
      * [Οδηγίες Εγκατάστασης](#οδηγίες-εγκατάστασης)
   * [Περιγραφή API](#περιγραφή-api)
      * [Methods](#methods)
         * [Board](#board)
            * [Ανάγνωση Board](#ανάγνωση-board)
            * [Αρχικοποίηση Board](#αρχικοποίηση-board)
         * [Piece](#piece)
            * [Ανάγνωση Θέσης/Πιονιού](#ανάγνωση-θέσης)
            * [Μεταβολή Θέσης Πιονιού](#μεταβολή-θέσης-πιονιού)
         * [Player](#player)
            * [Ανάγνωση στοιχείων παίκτη](#ανάγνωση-στοιχείων-παίκτη)
            * [Καθορισμός στοιχείων παίκτη](#καθορισμός-στοιχείων-παίκτη)
         * [Status](#status)
            * [Ανάγνωση κατάστασης παιχνιδιού](#ανάγνωση-κατάστασης-παιχνιδιού)
         * [Dice](#dice)
            * [Ρίψη ζαριών](#ρίψη-ζαριών)
      * [Entities](#entities)
         * [Board](#board-1)
         * [Players](#players)
         * [Game_status](#game_status)


# Demo Page

Μπορείτε να κατεβάσετε τοπικά ή να επισκευτείτε την σελίδα: 



# Εγκατάσταση

## Απαιτήσεις

* Apache2
* Mysql Server / MariaDB
* php

## Οδηγίες Εγκατάστασης

 * Κάντε clone το project σε κάποιον φάκελο <br/>
  `$ git clone `

 * Βεβαιωθείτε ότι ο φάκελος είναι προσβάσιμος από τον Apache Server. πιθανόν να χρειαστεί να καθορίσετε τις παρακάτω ρυθμίσεις.

 * Θα πρέπει να δημιουργήσετε στην Mysql την βάση με όνομα 'webgame' και να φορτώσετε σε αυτήν την βάση τα δεδομένα από το αρχείο webgame.sql

 * Θα πρέπει να φτιάξετε το αρχείο lib/db_upass.php το οποίο να περιέχει:
```
    <?php
	$DB_PASS = 'κωδικός';
	$DB_USER = 'όνομα χρήστη';
    ?>
```

# Περιγραφή Παιχνιδιού

Η εφαρμογή υλοποιεί μια παραλλαγή του ταβλιού, την «φεύγα».

Οι κανόνες είναι οι εξής: 
1.	Τα checkers μετακινούνται αριστερόστροφα του παίκτη.
2.	Αν μια θέσει έχει έστω και ένα checker του αντίπαλου, θεωρείται «κλειστή».
3.	Ένα checker μπορεί να μετακινηθεί μόνο σε θέσεις που είναι κενές, ή όπου υπάρχουν αλλά checker του ιδίου χρώματος.
4.	Τα checker μπορούν να μετακινηθούν ανάλογα με τον συνδυασμό των ζαριών (πχ. 3+5, ένα checker μπορεί να μετακινηθεί τρεις θέσεις, πέντε θέσεις, ή οκτώ θέσεις), υστέρα των οποίων θα καταναλώσουν τις ανάλογες κινήσεις των ζαριών.
5.	Αν ρίξουμε δυο ιδίες ζαριές, τότε έχουμε την δυνατότητα να μετακινήσουμε ως τέσσερα checkers.
6.	Για να μετακινηθεί ένα checker, πρέπει να δώσουμε σαν πρώτη είσοδο την τοποθεσία του (ξεκινάμε από το 1 και τελειώνουμε στο 24) και την τελική τοποθεσία (την οποία περνούμε προσθέτοντας την τωρινή τοποθεσία με τον συνδυασμό ζαριών που θέλουμε).
7.	Η διαδικασία του μαζέματος ξεκινά μόνο όταν όλα τα checkers της ιδίας ομάδας, έχουνε φτάσει στο τελευταίο τεταρτημόριο.
8.	Η λογική των ζαριών αλλάζει και δεν επιτρέπονται συνδυασμοί στο κομμάτι του μαζέματος.
9.	Κατά την διάρκεια του μαζέματος δεν μπορείς να συνδυάσεις ζαριές.
10.	Όταν έχουμε την κατάλληλη ζάρια, για να μαζέψουμε ένα checker, εισάγουμε αρχικά την τοποθεσία που βρίσκεται (για να το επιλέξουμε) και στην συνέχεια είτε επιλέγουμε το 0, είτε έναν αριθμό μεγαλύτερο από το 24.
11.	Ο νικητής είναι αυτός που μάζεψε όλα τα checkers του πρώτος.


Η βάση μας κρατάει τους εξής πίνακες και στοιχεία `board`, `game_status`, `board`.

Η εφαρμογή αναπτύχθηκε με το πλήρες API και ένα απλό GUI στο οποίο μόνο δυο παίκτες μπορούν να συνδέονται και να παίζουν μέχρι το τέλος του παιχνιδιού. 
Για την υλοποίηση του παιχνιδιού, χρησιμοποιήθηκε HTML, CSS, JS frontend, jQuery και PHP.

# Περιγραφή API

## Methods


### Board
#### Ανάγνωση Board

```
GET /board/
```

Επιστρέφει το [Board](#Board).

#### Αρχικοποίηση Board
```
POST /board/
```

Αρχικοποιεί το Board, δηλαδή το παιχνίδι. Γίνονται reset τα πάντα σε σχέση με το παιχνίδι.
Επιστρέφει το [Board](#Board).

### Piece
#### Ανάγνωση Θέσης/Πιονιού

```
GET /board/piece/:point_id/
```

Επιστρέφει τα στοιχεία από το [Board](#Board-1) με συντεταγμένη point_id.
Περιλαμβάνει το χρώμα των υπαρχόντων checker της θέσης και πλήθος τους.

#### Μεταβολή Θέσης Πιονιού

```
PUT /board/piece/:point_id/
```
Json Data στο body:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `point_id`     | Η νέα θέση checker          | yes        |

Κάνει την κίνηση του πιονιού από την τρέχουσα θέση (URL), στην νέα θέση (στο Body). 
Ελέγχεται αν η κίνηση είναι νόμιμη βάση των κανόνων φεύγα και των ζαριών. 
Επιστρέφει τα νέα στοιχεία του [Board](#Board-1).


### Player

#### Ανάγνωση στοιχείων παίκτη
```
GET /players/:p
```

Επιστρέφει τα στοιχεία του παίκτη p ή όλων των παικτών αν παραληφθεί. Το p μπορεί να είναι 'B' ή 'W'.

#### Καθορισμός στοιχείων παίκτη
```
PUT /players/:p
```
Json Data στο body:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `username`        | Το username για τον παίκτη p. | yes        |
| `piece_color`     | To χρώμα που επέλεξε ο παίκτης p. | yes        |


Επιστρέφει τα στοιχεία του παίκτη p και ένα token. Το token πρέπει να το χρησιμοποιεί ο παίκτης καθόλη τη διάρκεια του παιχνιδιού για authentication.

### Status

#### Ανάγνωση κατάστασης παιχνιδιού
```
GET /status/
```

Επιστρέφει το στοιχείο [Game_status](#Game_status).

#### Dice

#### Ρίψη ζαριών.
```
POST /roll/
```

Ρίχνει ζάρια για τον τρέχον χρήστη (αν δεν έχουν ριχτεί ήδη) και ενημερώνει το game_status.


## Entities


### Board
---------

Το board είναι ένας πίνακας, ο οποίος στο κάθε στοιχείο έχει τα παρακάτω:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `point_id`               | H συντεταγμένη μιας θέσης του board          | 1..24                               |
| `piece_color`            | To χρώμα του checker που μπορεί να βρίσκεται στη θέση| 'B','W',null                 |
| `point_count`            | Ο αριθμός των checker που βρίσκονται στην θέση  | 0..15                            |


### Players
---------

O κάθε παίκτης έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `username`               | Όνομα παίκτη                                 | String                              |
| `piece_color`            | To χρώμα που παίζει ο παίκτης                | 'B','W'                             |
| `token  `                | To κρυφό token του παίκτη. Επιστρέφεται μόνο τη στιγμή της εισόδου του παίκτη στο παιχνίδι | String |
| `last_action`            | Τελευταία αλλαγή/ενέργεια στην κατάσταση του παίκτη | timestamp                 |


### Game_status
---------

H κατάσταση παιχνιδιού έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `current_status  `       | Κατάσταση                                    | 'not active', 'initialized', 'started', 'ended', 'aborted'     |
| `current_turn`           | To χρώμα του παίκτη που παίζει               | 'B','W',null                         |
| `first_dice`             |  To πρώτο ζάρι                               |  1..6 ,null                          |
| `second_dice`            |  To δεύτερο ζάρι                             |  1..6 ,null                          |
| `third_dice`             |  To τρίτο ζάρι (σε περίπτωση ίδιων πρώτων)   |  1..6 ,null                          |
| `fοurth_dice`            |  To τέταρτο ζάρι (σε περίπτωση ίδιων πρώτων) |  1..6 ,null                          |
| `white_collected`        |  Τα checker που μάζεψε ο άσπρος παίκτης      |  0..15                               |
| `black_collected`        |  Τα checker που μάζεψε ο μαύρος  παίκτης     |  0..15                               |
| `result_of_match`        |  To χρώμα του παίκτη που κέρδισε             |'B','W'                               |
| `last_change`            | Τελευταία αλλαγή/ενέργεια στην κατάσταση του παιχνιδιού | timestamp                 |
